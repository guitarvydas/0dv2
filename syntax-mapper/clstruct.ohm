StructdefRewrite {
  program = item+
  item =
    | structdef
    | any

  structdef = id ws "::" ws "â€¹structâ€º" ws "{" fields "}"
  fields = skipTo<"}",structdef>
  
      dqb = "â€œ"
    dqe = "â€"
  string = dqb (~dqb ~dqe any)* dqe

    sqb = "â›"
    sqe = "âœ"
  charconst = sqb (~sqb ~sqe any)* sqe

  id = "â²" (~"â²" ~"â³" any)* "â³"


    intb = "âŸ¨"
    inte = "âŸ©"
  integer = intb (~intb ~inte any)* inte

    symb = "â²"
    syme = "â³"
  symbol = symb (~symb ~syme any)* syme
  sym<text> = symb text syme
    
    kwb = "â€¹"
    kwe = "â€º"
  keyword = kwb (~kwb ~kwe any)* kwe

    mcb = "âŸª"
    mce = "âŸ«"
  multi_char_operator = mcb (~mcb ~mce any)* mce

  indentc = "â‡¢"
  dedentc = "â‡ "

    vb = "âª"
    ve = "â«"
    verbatim = vb (~vb ~ve any)* ve

  comment = "â£" (~"â£" ~"â¦" any)* "â¦"

    ab = "â¨"
    ae = "â¬"
  annotation = ab (~ab ~ae any)* ae


  anyToken1 = string | charconst | id | integer | keyword | multi_char_operator | indentc | dedentc | verbatim | comment | symbol | integer | any
  anyToken = anyToken1

    uspc = "ãƒ»"
    unl = "â¦š"
    srcnl = unl
    
    spc = " "
    nl = "\n"

    commentspace = "â—¦"
    commentnl = "Â¶"

    stringspace = "â–¡"
    stringnl = "â€¡"
    charspace = "â˜"
    charnl = "â€ "

    scopebegin = "â§"
    scopeend = "â­"

    semanticscopebeginopen = "âªâ§"
    semanticscopebeginclose = "â«"
    semanticscopeendopen = "âªâ­"
    semanticscopeendclose = "â«"
    scopedvaropen = "âªğ›•"
    scopedvarclose = "â«"
    

    wsc = space | spc | nl | uspc | unl | indentc | dedentc | commentspace | commentnl | stringspace | stringnl | charspace | charnl | verbatim | scopebegin | scopeend
    ws = wsc*



    skipTo<stopBefore,macro> =
    | &stopBefore -- done
    | macro -- macro
    | inner skipTo<stopBefore,macro> -- continue
  inner =
    | "(" ws inner* ")" -- nestedparens
    | "{" ws inner* "}" -- nestedbraces
    | ~"(" ~")" ~"{" ~"}" ~scopebegin ~scopeend anyToken -- bottom

}
