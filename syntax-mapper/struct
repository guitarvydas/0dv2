❲Eh❳・::・❲struct❳・{⦚・❲name❳:・❲string❳,⦚・❲input❳:・❲queue❳.❲Queue❳(❲Message❳),⦚・❲output❳:・❲queue❳.❲Queue❳(❲Message❳),⦚・❲yield❳:・❲queue❳.❲Queue❳(❲Message❳),⦚・❲data❳:	・^❲any❳,・⦚・❲children❳:・[]^❲Eh❳,・⦚・❲connections❳:・[]❲Connector❳,・⦚・❲handler❳:・#❲type❳・❲proc❳(❲eh❳:・^❲Eh❳,・❲message❳:・❲Message❳,・❲data❳:・^❲any❳),⦚・❲state❳:・❲int❳,⦚}⦚❲make_container❳・::・❲proc❳(❲name❳:・❲string❳)・->・^❲Eh❳・{⦚・❲eh❳・:=・❲new❳(❲Eh❳)⦚・❲eh❳.❲name❳・=・❲name❳⦚・❲eh❳.❲handler❳・=・❲container_handler❳⦚・⦚・❲return❳・❲eh❳⦚}⦚❲output_list❳・::・❲proc❳(❲eh❳:・^❲Eh❳,・❲allocator❳・:=・❲context❳.❲allocator❳)・->・[]❲Message❳・{⦚・❲list❳・:=・❲make❳([]❲Message❳,・❲eh❳.❲output❳.❲len❳)⦚・❲iter❳・:=・❲make_fifo_iterator❳(&❲eh❳.❲output❳)⦚・❲for❳・❲msg❳,・❲i❳・❲in❳・❲fifo_iterate❳(&❲iter❳)・{⦚・❲list❳[❲i❳]・=・❲msg❳⦚・}⦚・❲return❳・❲list❳⦚}⦚❲set_state❳・::・#❲force_inline❳・❲proc❳(❲eh❳:・^❲Eh❳,・❲state❳:・$❲State❳)⦚❲where❳⦚・❲intrinsics❳.❲type_is_enum❳(❲State❳)⦚{⦚・❲eh❳.❲state❳・=・❲int❳(❲state❳)⦚}⦚




